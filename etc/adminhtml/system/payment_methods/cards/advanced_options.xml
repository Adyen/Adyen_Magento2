<?xml version="1.0"?>
<!--
/**
 *                       ######
 *                       ######
 * ############    ####( ######  #####. ######  ############   ############
 * #############  #####( ######  #####. ######  #############  #############
 *        ######  #####( ######  #####. ######  #####  ######  #####  ######
 * ###### ######  #####( ######  #####. ######  #####  #####   #####  ######
 * ###### ######  #####( ######  #####. ######  #####          #####  ######
 * #############  #############  #############  #############  #####  ######
 *  ############   ############  #############   ############  #####  ######
 *                                      ######
 *                               #############
 *                               ############
 *
 * Adyen Payment module (https://www.adyen.com/)
 *
 * Copyright (c) 2020 Adyen BV (https://www.adyen.com/)
 * See LICENSE.txt for license details.
 *
 * Author: Adyen <magento@adyen.com>
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <label>Advanced options</label>
    <field id="enable_card_types" translate="label" type="select" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
        <label>Accepted card types</label>
        <source_model>Magento\Config\Model\Config\Source\Yesno</source_model> <!--TODO: Use custom source model-->
         <!--TODO: new config path?-->
    </field>
    <field id="cctypes" translate="label" type="multiselect" sortOrder="20" showInDefault="1" showInWebsite="1" showInStore="0">
        <depends>
            <field id="enable_card_types">1</field>
        </depends>
        <label>Custom selection</label>
        <source_model>Adyen\Payment\Model\Config\Source\CcType</source_model>
        <config_path>payment/adyen_cc/cctypes</config_path>
        <comment><![CDATA[The selected types need to be enabled on your merchant account.]]></comment>
    </field>
    <field id="title" translate="label" type="select" sortOrder="30" showInDefault="1" showInWebsite="1" showInStore="1">
        <label>Share billing agreements between stores</label>
        <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
        <config_path>payment/adyen_oneclick/share_billing_agreement</config_path> <!--TODO: Check which is the correct config path. Duplicated field in prototype (43)-->
    </field>
    <field id="enable_installments" translate="label" type="select" sortOrder="40" showInDefault="1" showInWebsite="1" showInStore="1">
        <label>Enable installments</label>
        <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
        <config_path>payment/adyen_cc/enable_installments</config_path>
    </field>
    <field id="installments" translate="label" sortOrder="50" showInDefault="1" showInWebsite="1" showInStore="1">
        <label>Installments</label>
        <depends>
            <field id="enable_installments">1</field>
        </depends>
        <tooltip>Configure your installment for each credit card type: Insert the minimum amount required to
            make the configured installment available in the amount range column.
            Example: if the amount range is configured to 100 and the number of installments to 4x, the shopper
            will see the 4x option only if the payment total is higher or equal than 100.
        </tooltip>
        <frontend_model>Adyen\Payment\Block\Adminhtml\System\Config\Field\Installments</frontend_model>
        <backend_model>Adyen\Payment\Model\Config\Backend\Installments</backend_model>
        <config_path>payment/adyen_cc/installments</config_path>
    </field>
    <field id="allowspecific_cards" translate="label" type="allowspecific" sortOrder="60" showInDefault="1" showInWebsite="1" showInStore="0">
        <label>Applicable countries</label>
        <source_model>Magento\Payment\Model\Config\Source\Allspecificcountries</source_model><!--TODO: Replace with custom source model-->
        <config_path>payment/adyen_cc/allowspecific</config_path>
    </field>
    <field id="specificcountry" translate="label" type="multiselect" sortOrder="70" showInDefault="1" showInWebsite="1" showInStore="0">
        <label>Custom selection</label>
        <depends>
            <field id="allowspecific_cards">1</field>
        </depends>
        <source_model>Magento\Directory\Model\Config\Source\Country</source_model>
        <can_be_empty>1</can_be_empty>
        <config_path>payment/adyen_cc/specificcountry</config_path>
    </field>
</config>
